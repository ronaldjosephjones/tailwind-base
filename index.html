<?php

$fullpage = array (
    "index",
    "opinion",
    "sitemap",
    "refer",
    "maintenance",
    "payment",
    "thank-you",
    "free-estimate",
    "email",
    "opinion-service",
    "energy-review",
    "crew-review",
    "free-estimate/confirmation",
    "schedule",
    "survey",
    "privacy-policy",
    "search",
    "additional-comments",
    "mitigation-survey",
    "testing-survey",
    "city-page-redesign",
    "service-area",
    "zip-search",
    "air-purifier",
    "insulation"
);

$modulepages = array (
    "opinion",
    "before-after",
    "photo-gallery",
    "refer",
    "meet-the-team",
    "news-and-events",
    "blog",
    "reviews",
    "awards",
    "press-release",
    "crew-review",
    "case-studies",
    "affiliations",
    "technical-papers",
    "case-studies",
    "search",
    "service-area",
    "homeshows",
    "about-us"
);  

?>
<!DOCTYPE html>
<html lang="en">
  <head>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
    	<title>[[title]]</title>
    	<meta name="description" content="[[description]]">
    	<meta name="referrer" content="no-referrer-when-downgrade">
    	<meta name="keywords" content="[[keywords]]">
        <meta name="theme-color" content="#005eb8">
        <link rel="icon" type="image/x-icon" href="https://cdn.treehouseinternetgroup.com/cms_images/1667/favicon.ico">
        [[dev_banner_css]]
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
        tailwind.config = {
          theme: {
            fontFamily: {
              sans: "var(--font-family)",
            },
            extend: {
              colors: {
                brand: {
                  bright: "var(--brand-bright)",
                  DEFAULT: "var(--brand-default)",
                  dark: "var(--brand-dark)",
                  accent: "var(--brand-accent)",
                },
              },
            },
          },
        };
        </script>
        <style type="text/tailwindcss">[[inline_css]]</style>
        
        <?php

        global $siteTokens;

        // Inline CSS = Critical 
        // Core CSS = Grid System & Helpers 
        // Content & Module CSS = Per Page Items 
        // Template CSS = Local / Template Specific Things 
        
        ?>

        
        <!--NEW TW layout base and layout helper classes from css bundler http://bsiadmin.com/portal/utility/css_bundler/index.php --> 
        <link rel="stylesheet" href="new-layout-base-here.css" />
        
        <!--NEW content and modules from css bundler http://bsiadmin.com/portal/utility/css_bundler/index.php --> 
        <link rel="stylesheet" href="new-[[page_type]]-base-here.css">

        <!-- template css tab - for site specific customizations -->
        <link rel="stylesheet" as="style" onload="this.rel='stylesheet';this.onload=null;" href="/inc/sb-styles.css?v=987">
         
         
        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    
          <!--
      [[page_type]]
       We can use this to make a content.css and a module.css without php 
      -->
</head>
<body>
    <header id="header">
      <div id="header--logo">
        <a href="/">
          <img src="https://cdn.treehouseinternetgroup.com/cdn-cgi/image/format=auto/cms_images/119/Woods-Logo-2018_Family-Tag.png" />
        </a>
      </div>
      <div id="header--territory">
        <div id="header--angle-svg">
          <svg height="44" width="36" style="left:-1px;">
            <polygon points="0,0 0,44 36,44"></polygon>
          </svg>
        </div>
        <p id="header--open-text">We're Open</p>
        <div class="header--divider"></div>
        <p id="header--serving-text">
          Serving
          <span>King's Landing, Lannisport & nearby</span>
        </p>
        <div class="header--divider"></div>
        <p id="header--phone-text">1-666-666-6666</p>
      </div>
      <div id="header--phone-mobile">
        <p>
          <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
            <!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
            <path d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"></path>
          </svg>
          Call Now
        </p>
      </div>
      <div id="header--nav">
            <!-- SUPER NAV TOOL -->
            [[top_nav]]
            <!-- END SUPER NAV TOOL -->
        </div>
    </header>
    
        
    <div id="page-wrap">
        <?php if ($thePage == "index") { ?>
        
        <!-----HERO----->
            <div id="hero" class="home relative bg-brand-dark">
              <div class="absolute h-full w-full">
                <img class="h-full w-1/2 object-cover object-right md:w-3/5" src="https://cdn.treehouseinternetgroup.com/cms_images/119/main-message-bg-crop-2.svg" />
              </div>
              <div class="relative mx-auto grid max-w-7xl grid-cols-[40%,auto] px-4 md:grid-cols-2 md:px-10">
                <div id="hero-owners" class="relative ml-auto mr-0 w-full max-w-2xl">
                  <img class="z-1 absolute bottom-6 left-0 hidden w-1/4 md:block" src="https://cdn.treehouseinternetgroup.com/cms_images/119/woods-text.png" />
                  <div class="absolute relative bottom-0 z-0 ml-auto mr-0 h-full max-w-xl overflow-hidden md:relative md:h-[600px] md:w-4/5">
                    <img class="translate-y-36 md:translate-y-10" src="https://cdn.treehouseinternetgroup.com/cms_images/119/mm-woods-owners-shadow.svg" />
                  </div>
                  <img class="absolute left-1/2 top-4 w-[clamp(100px,10vw,175px)] -translate-x-1/2 md:left-0 md:top-10 md:translate-x-0" src="https://cdn.treehouseinternetgroup.com/cms_images/119/mm-badge-rated-upd.svg" />
                </div>
                <div id="hero-text" class="flex flex-1 flex-col items-center justify-center py-12 pl-4 text-center text-white">
                  <img class="w-full max-w-xl md:w-10/12" src="https://cdn.treehouseinternetgroup.com/cms_images/119/ATB_Stacked_KO.png" />
                  <p class="mt-2 text-sm font-light uppercase md:text-base">your local experts for</p>
                  <ul class="flex max-w-xl flex-col flex-wrap justify-center gap-x-6 gap-y-2 text-base/5 font-bold list-none pl-0 md:text-xl lg:flex-row lg:text-xl xl:text-2xl">
                    <li class="mb-0">Basement Waterproofing</li>
                    <li class="mb-0">Foundation Repair</li>
                    <li class="mb-0">Crawl Space Repair</li>
                    <li class="mb-0">And more!</li>
                  </ul>
                  <a href="/free-estimate.html" class="button my-0 absolute -bottom-6 left-1/2 -translate-x-1/2 lg:relative lg:bottom-0 lg:left-[unset] lg:translate-x-0 lg:text-2xl"> Get Your Free Estimate </a>
                </div>
              </div>
            </div>
        <!-----END HERO----->
        
        <?php
        }
        else
        {
        ?>
                <div id="siloBanner">
                    <img src=
                        <?php
                            if (stristr($thePage,"basement-waterproofing"))
                            {
                                ?>
                                 "/core/images/templates/bambam/images/headers/waterproofing-silo-grey.jpg"
                            <?php
                            }
                            elseif (stristr($thePage,"foundation-repair"))
                            {
                                ?>
                                 "/core/images/templates/bambam/images/headers/wall-crack-silo-grey.jpg"
                            <?php
                            }
                            else
                            {
                                ?>
                                "/core/images/templates/bambam/images/headers/about-silo-grey.jpg"
                        <?php
                        }
                        ?>
                    alt="<?php echo $cmsPageData['page.name']; ?>" /><!-- end #siloBanner img -->	
                    <p>
                        <?php echo $cmsPageData['page.name']; ?>
                    </p>
                </div><!-- end #siloBanner -->

                <?php if ( (!in_array($thePage, $fullpage)) && ($isCityPage == 0) ) { ?>        
                    <div id="silo-sidebar">
                        <div id="sidebar-nav">[[single_silo_nav]]</div>
                    </div>
                <?php
                }
                ?>
            <div id="content-wrap">
                [[breadcrumbs]]
        <?php
        }
        ?>
                [[content]]
        <?php if ($thePage != "index") { ?>
            </div><!-- end #content-wrap for child pages -->
        <?php
        }
        ?>
        </div><!-- end #page-wrap for child pages -->
        <footer>
            <div>
                <div id="footer-contact">
                    <span>Contact Us Online</span>
                    <a class="button" href="/free-estimate.html" title="Contact us for a free estimate">Get Your Free Estimate</a>
                    <span>Or call us at</span>
                    <a href="tel:<?php echo $phonenumber; ?>">[phone]</a>
                </div>
                <div class="footer-links">
                    <?php
                        $superNav = new nav();
                        $superNav->superMode = 'bottom';
                        $superNav->superSplitAboutWork = true;
                        echo $superNav->generateSuperMarkup();
                    ?>
                    [[social_footer]]
                </div>
            </div>
            <div id="footer-address">
                <p>
                  <?php echo(date('Y')); ?>
                  [[company]]
                </p>
                <span></span>
                <p>[[address street]], [[address city]], [[address state]] [[address zip]]</p>
                <span></span>
                <p>[phone]</p>
            </div>
        </footer>
  <script>
// Sticky Header/Nav
    let scrollpos = window.scrollY
    const pageBody = document.querySelector("body")  
    const header = document.getElementById("header")
    const header_height = header.offsetHeight - 1
    
    const add_class_on_scroll = () => pageBody.classList.add("stuck")
    const remove_class_on_scroll = () => pageBody.classList.remove("stuck")
    
    window.addEventListener('scroll', function() { 
      scrollpos = window.scrollY;
    
      if (scrollpos > header_height) { add_class_on_scroll() }
      else { remove_class_on_scroll() }
    });
    
// Sticky Sidebar Nav
(function () {
    var subnav = document.getElementById("sidebar-nav");
    if (!subnav) return;
    var content = document.getElementById("content-wrap");
    var sidebar = subnav.parentElement;
    if (window.innerWidth >= 1024 && content.offsetHeight > subnav.offsetHeight) {
        var banner = document.getElementById("siloBanner");
        contentMT = window.getComputedStyle(content).getPropertyValue("margin-top");
        contentMT = parseInt(contentMT.slice(0, -2));
        window.addEventListener("load", function () {
            subnav.style.width = sidebar.offsetWidth - 30 + "px";
        });
        window.addEventListener("resize", function () {
            subnav.style.width = sidebar.offsetWidth - 30 + "px";
        });
        window.addEventListener("scroll", stickySubnav);
    }
    function stickySubnav() {
        if (banner.getBoundingClientRect().top < 0) {
            var contentOffset = content.getBoundingClientRect();
            var fixednav = document.getElementById("header");
            if (contentOffset.top <= fixednav.offsetHeight + contentMT && contentOffset.bottom > subnav.offsetHeight + fixednav.offsetHeight) {
                subnav.style.position = "fixed";
                subnav.style.top = fixednav.offsetHeight + "px";
            } else if (contentOffset.bottom <= subnav.offsetHeight + fixednav.offsetHeight) {
                subnav.style.position = "relative";
                subnav.style.top = content.offsetHeight + contentMT - subnav.offsetHeight + "px";
            } else {
                subnav.style.position = "";
                subnav.style.top = "";
            }
        } else {
            subnav.style.position = "";
            subnav.style.top = "";
        }
    }
})();

</script>
<!-- TH Modal Popup -->
<script src="https://cdn.treehouseinternetgroup.com/cms_core/assets/js/th_modals.js" type="text/javascript"></script>
<script>
    const imagePopups = new ThModal({mode:'image', groupSelector: '[data-modal-gallery]', itemSelector: '[data-modal-image]'});
    const videoPopups = new ThModal({mode:'video', groupSelector: '[data-modal-videos]', itemSelector: '[data-modal-video]',useVideoElement: true});
</script>
  </body>


</html>
